<html>

<head>
    <title>ana[VERSE] Project title</title>
    <style>
        .project {
            margin: auto;
            text-align: center;
        }
    </style>
</head>

<body>

</body>

<script>
    const Random = function (n) { var r, $, t, u, _ = function n(r) { for (var $ = 0, t = 1779033703 ^ r.length; $ < r.length; $++)t = (t = Math.imul(t ^ r.charCodeAt($), 3432918353)) << 13 | t >>> 19; return function () { return t = Math.imul((t = Math.imul(t ^ t >>> 16, 2246822507)) ^ t >>> 13, 3266489909), (t ^= t >>> 16) >>> 0 } }(n), o = { rand: (r = _(), $ = _(), t = _(), u = _(), function () { t |= 0; var n = ((r |= 0) + ($ |= 0) | 0) + (u |= 0) | 0; return u = u + 1 | 0, r = $ ^ $ >>> 9, $ = t + (t << 3) | 0, t = (t = t << 21 | t >>> 11) + n | 0, (n >>> 0) / 4294967296 }), randInt: function (n, r) { return n + Math.floor((r - n) * o.rand()) } }; return o };

    // Parse payload from query params
    const q = new URLSearchParams(window.location.search).get("payload")
    const p = JSON.parse(q ? atob(q) : "{}")

    const randomHash = () => {
        let alphabet = "123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ";
        return "oo" +
            Array(49)
                .fill(0)
                .map((_) => alphabet[(Math.random() * alphabet.length) | 0])
                .join("");
    };

    // Use available payload variables in your code
    const hash = p.hash || randomHash()
    const editionNumber = p.editionNumber || 1
    const totalEditions = p.totalEditions || 1

    const prng = Random(hash)

    // Generate random number
    prng.rand()

    // Generate random number between [a, b)
    prng.randInt(0, 100)

</script>

<script type="module">
    import { genererFigures } from "./figures.js";

    // The second argument can be either true or false, at your convenience.
    // It is always set to TRUE when loaded in the anaverse.

    const anaverseElements = genererFigures(hash, false);


    console.log(anaverseElements)

    const textDiv = document.createElement("div");
    textDiv.style = "margin:10%;font-family:monospace"
    textDiv.innerHTML = `<h2>${anaverseElements.features.Name}<h2>`;

    for (let i = 0; i < anaverseElements.figures.length; i++) {
        let c = anaverseElements.figures[i];
        textDiv.innerHTML += `<br><b>Cube ${i + 1}:</b> 
            dimensions[${c.geometry.args[0]},${c.geometry.args[1]},${c.geometry.args[2]}] - 
            position[${c.pos.x},${c.pos.y},${c.pos.z}]<br>`

    }

    document.body.appendChild(textDiv)

</script>


</html>